---
sidebarDepth: 4
---

# 前端工程化

## 配置文件

对于大多数工具库，如`babel`、`webpack`、`eslint`等，都存在多种传递参数的方式。

- 命令行参数。如`npx babel src --out-dir dist`

- 配置文件。部分工具可以通过类似`npx jest --init`的方式自动生成配置文件。通常形如`babel.config.js`、`babel.config.json`，或者`.babelrc`、`.babelrc.json`都是有效的文件格式。

  > 注：`babel.config.js`指项目全局配置，而`.babelrc`只应用于项目中的一部分。

- `package.json`的特定字段

## [编译器](https://github.com/jamiebuilds/the-super-tiny-compiler)

本章节的内容涵盖了若干个前端领域常用的工具库，诸如`babel`、`eslint`、`prettier`等，这些工具的共同点是都需要对源代码进行语法分析和代码转换，而这实际上是编译器在其中所起到的作用。

简单来说，编译器的流程可以简化成如下步骤（以`babel`为例）：

1. 对于输入的**源代码**进行**词法解析**，获得**Token流**
2. 对于**Token流**进行**语法解析**，获得**抽象语法树（Abstract Syntax Tree）**
3. 遍历（Traverse）抽象语法树的节点，进行分析和对节点的转换，从而获得**新的抽象语法树**
4. 根据新的抽象语法树生成新的代码

其中步骤一和步骤二的目的是根据源代码得到抽象语法树，也被称为**解析器（Parser）**，可见对不同类型的源代码需要使用不同的解析器才能得到对应的抽象语法树。

> 实际上，`eslint`使用`espree`（封装于`Acorn`）解析`JS`代码，如果希望`eslint`解析`TS`代码我们需要自行把`eslint`的解析器（Parser）设置为`@typescript-eslint/parser`并提供相应的插件支持`@typescript-eslint/eslint-plugin`（需要安装`typescript`模块）。
>
> 而`babel`使用的解析器`@babel/parser`（曾用名`babylon`，封装于`Acorn`）本身就支持`JS`和`TS`代码的解析。

在我们使用`@babel/parser`解析源代码生成抽象语法树后，使用`@babel/traverse`对语法树进行遍历，同时我们可以在这个过程中编写`Visitor`相关的逻辑，从而可以实现不同的[`babel`插件](https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/plugin-handbook.md)。

当我们得到新的抽象语法树，使用`@babel/generator`就可以生成新的代码。








## VS Code

常用的VSCode插件。

##### ESLint

安装`VSCode`的同名`ESLint`插件后，当项目中**存在本地依赖**`eslint`并且存在`.eslintrc.js`**配置文件**时，`VSCode`会根据所指定的规则**自动提示代码的错误**。

并且我们可以通过编辑`VSCode`的配置文件`setting.json`来开启**自动代码纠正**，每当保存文件就自动格式化文件。

``` json
// .vscode/setting.json
{
    "editor.codeActionsOnSave": {
    	"source.fixAll": true
	}
}
```



##### Prettier

我们可以安装`VSCode`的`prettier-vscode`，这样我们可以直接在`VSCode`使用`prettier`格式化代码。

``` json
// .vscode/setting.json
"editor.defaultFormatter": "esbenp.prettier-vscode"
```



##### Gitlens

能看到代码修改人和修改时间。



##### Bracket Pair Colorizer 2

括号高亮。



##### Color HighLight 

颜色高亮。



##### ES7 React/Redux Snippets

代码补全。



##### Path Interllisense 

代码补全



##### EditorConfig

该插件可以根据项目目录下的`.editorconfig`自动调整缩进等参数。

``` 
root = true

[*]
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true
charset = utf-8
indent_style = space
indent_size = 4 
```



##### Code Spell Checker

单词检查。

##### Open In Browser

##### Live Server



